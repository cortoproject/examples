<!DOCTYPE html>
<html>
<head>
  <title>examples/web/rest</title>
</head>
<body style="background-color: #e06952; font-family: sans-serif">

  <p id="result" style="background-color: #fff; padding: 20px; font-family: monospace"></p>

  <script language="javascript">
    var result = document.getElementById('result');
    var request = new XMLHttpRequest();
    request.onreadystatechange = function() {
      if(request.readyState === 4) {
        if(request.status === 200) {
          var mon = JSON.parse(request.responseText);
          var cpu = mon.value.cpu.value;
          var mem = mon.value.memory.value;

          console.log(mon);

          result.innerHTML =
            "<b>CPU</b>" +
            "<table border=\"1\" cellpadding=\"5\">" +
            " <tr>" +
            "  <td>user</td><td>sys</td><td>nice</td>" +
            " </tr>" +
            " <tr>" +
            "  <td>" + cpu.user + "</td><td>" + cpu.sys + "</td><td>" + cpu.nice + "</td>" +
            " </tr>" +
            "</table><br>" +
            "<b>Memory</b>" +
            "<table border=\"1\" cellpadding=\"5\">" +
            " <tr>" +
            "  <td>free</td><td>used</td><td>total</td>" +
            " </tr>" +
            " <tr>" +
            "  <td>" + mem.actual_free + "</td><td>" + mem.actual_used + "</td><td>" + mem.total + "</td>" +
            " </tr>" +
            "</table>"

        } else {
          result.innerHTML = 'An error occurred during your request: ' +  request.status + ' ' + request.statusText;
        }
      }
    }

    request.open('Get', "api?select=/mon&value=true");
    request.send();
  </script>
</body>
</html>
